-- directory paths and dlsuffix are passed to us in environment variables
\getenv libdir PG_LIBDIR
\getenv dlsuffix PG_DLSUFFIX
\set regresslib :libdir '/regress' :dlsuffix
CREATE FUNCTION test_translation()
    RETURNS void
    AS :'regresslib'
    LANGUAGE C;
-- We don't want to assume that the platform has any particular language
-- installed, so we use a "translation" for the C locale.  However, gettext
-- will short-circuit translation if lc_messages is just 'C'.  Fake it out
-- by appending a codeset name.  Fortunately it seems that that need not
-- match the actual database encoding.
SET lc_messages = 'C.UTF-8';
SELECT test_translation();
NOTICE:  NLS is not enabled
NOTICE:  untranslated PRId64 = 424242424242
NOTICE:  untranslated PRId32 = -1234
NOTICE:  untranslated PRIdMAX = -123456789012
NOTICE:  untranslated PRIdPTR = -9999
NOTICE:  untranslated PRIu64 = 424242424242
NOTICE:  untranslated PRIu32 = 4294966062
NOTICE:  untranslated PRIuMAX = 123456789012
NOTICE:  untranslated PRIuPTR = 9999
NOTICE:  untranslated PRIx64 = 62c6d1a9b2
NOTICE:  untranslated PRIx32 = fffffb2e
NOTICE:  untranslated PRIxMAX = 1cbe991a14
NOTICE:  untranslated PRIxPTR = 270f
NOTICE:  untranslated PRIX64 = 62C6D1A9B2
NOTICE:  untranslated PRIX32 = FFFFFB2E
NOTICE:  untranslated PRIXMAX = 1CBE991A14
NOTICE:  untranslated PRIXPTR = 270F
 test_translation 
------------------
 
(1 row)

RESET lc_messages;
