Parsed test spec with 4 sessions

starting permutation: s3_setup_wait_before_set_dead s3_start_reindex s1_start_upsert s4_wakeup_to_set_dead s2_start_upsert s4_wakeup_s1 s4_wakeup_s2
injection_points_attach
-----------------------
                       
(1 row)

injection_points_attach
-----------------------
                       
(1 row)

injection_points_set_local
--------------------------
                          
(1 row)

step s3_setup_wait_before_set_dead: 
	SELECT injection_points_attach('reindex-relation-concurrently-before-set-dead', 'wait');

injection_points_attach
-----------------------
                       
(1 row)

step s3_start_reindex: 
	REINDEX INDEX CONCURRENTLY test.tbl_pkey;
 <waiting ...>
step s1_start_upsert: 
	INSERT INTO test.tbl VALUES (13,now()) ON CONFLICT (i) DO UPDATE SET updated_at = now();
 <waiting ...>
step s4_wakeup_to_set_dead: 
	SELECT injection_points_detach('reindex-relation-concurrently-before-set-dead');
	SELECT injection_points_wakeup('reindex-relation-concurrently-before-set-dead');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s2_start_upsert: 
	INSERT INTO test.tbl VALUES (13,now()) ON CONFLICT (i) DO UPDATE SET updated_at = now();
 <waiting ...>
step s4_wakeup_s1: 
	SELECT injection_points_detach('check-exclusion-or-unique-constraint-no-conflict');
	SELECT injection_points_wakeup('check-exclusion-or-unique-constraint-no-conflict');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s1_start_upsert: <... completed>
step s4_wakeup_s2: 
	SELECT injection_points_detach('exec-insert-before-insert-speculative');
	SELECT injection_points_wakeup('exec-insert-before-insert-speculative');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s2_start_upsert: <... completed>
step s3_start_reindex: <... completed>

starting permutation: s3_setup_wait_before_swap s3_start_reindex s1_start_upsert s4_wakeup_to_swap s2_start_upsert s4_wakeup_s2 s4_wakeup_s1
injection_points_attach
-----------------------
                       
(1 row)

injection_points_attach
-----------------------
                       
(1 row)

injection_points_set_local
--------------------------
                          
(1 row)

step s3_setup_wait_before_swap: 
	SELECT injection_points_attach('reindex-relation-concurrently-before-swap', 'wait');

injection_points_attach
-----------------------
                       
(1 row)

step s3_start_reindex: 
	REINDEX INDEX CONCURRENTLY test.tbl_pkey;
 <waiting ...>
step s1_start_upsert: 
	INSERT INTO test.tbl VALUES (13,now()) ON CONFLICT (i) DO UPDATE SET updated_at = now();
 <waiting ...>
step s4_wakeup_to_swap: 
	SELECT injection_points_detach('reindex-relation-concurrently-before-swap');
	SELECT injection_points_wakeup('reindex-relation-concurrently-before-swap');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s2_start_upsert: 
	INSERT INTO test.tbl VALUES (13,now()) ON CONFLICT (i) DO UPDATE SET updated_at = now();
 <waiting ...>
step s4_wakeup_s2: 
	SELECT injection_points_detach('exec-insert-before-insert-speculative');
	SELECT injection_points_wakeup('exec-insert-before-insert-speculative');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s4_wakeup_s1: 
	SELECT injection_points_detach('check-exclusion-or-unique-constraint-no-conflict');
	SELECT injection_points_wakeup('check-exclusion-or-unique-constraint-no-conflict');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s1_start_upsert: <... completed>
step s2_start_upsert: <... completed>
step s3_start_reindex: <... completed>

starting permutation: s3_setup_wait_before_set_dead s3_start_reindex s1_start_upsert s2_start_upsert s4_wakeup_s1 s4_wakeup_to_set_dead s4_wakeup_s2
injection_points_attach
-----------------------
                       
(1 row)

injection_points_attach
-----------------------
                       
(1 row)

injection_points_set_local
--------------------------
                          
(1 row)

step s3_setup_wait_before_set_dead: 
	SELECT injection_points_attach('reindex-relation-concurrently-before-set-dead', 'wait');

injection_points_attach
-----------------------
                       
(1 row)

step s3_start_reindex: 
	REINDEX INDEX CONCURRENTLY test.tbl_pkey;
 <waiting ...>
step s1_start_upsert: 
	INSERT INTO test.tbl VALUES (13,now()) ON CONFLICT (i) DO UPDATE SET updated_at = now();
 <waiting ...>
step s2_start_upsert: 
	INSERT INTO test.tbl VALUES (13,now()) ON CONFLICT (i) DO UPDATE SET updated_at = now();
 <waiting ...>
step s4_wakeup_s1: 
	SELECT injection_points_detach('check-exclusion-or-unique-constraint-no-conflict');
	SELECT injection_points_wakeup('check-exclusion-or-unique-constraint-no-conflict');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s1_start_upsert: <... completed>
step s4_wakeup_to_set_dead: 
	SELECT injection_points_detach('reindex-relation-concurrently-before-set-dead');
	SELECT injection_points_wakeup('reindex-relation-concurrently-before-set-dead');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s4_wakeup_s2: 
	SELECT injection_points_detach('exec-insert-before-insert-speculative');
	SELECT injection_points_wakeup('exec-insert-before-insert-speculative');

injection_points_detach
-----------------------
                       
(1 row)

injection_points_wakeup
-----------------------
                       
(1 row)

step s2_start_upsert: <... completed>
step s3_start_reindex: <... completed>
