# Copyright (c) 2022-2025, PostgreSQL Global Development Group

tests += {
  'name': 'recovery',
  'sd': meson.current_source_dir(),
  'bd': meson.current_build_dir(),
  'tap': {
    'test_kwargs': {'priority': 40}, # recovery tests are slow, start early
    'env': {
       'enable_injection_points': get_option('injection_points') ? 'yes' : 'no',
    },
    'tests': [
      't/001_stream_rep.pl',
      't/002_archiving.pl',
      't/003_recovery_targets.pl',
      't/004_timeline_switch.pl',
      't/005_replay_delay.pl',
      't/006_logical_decoding.pl',
      't/007_sync_rep.pl',
      't/008_fsm_truncation.pl',
      't/009_twophase.pl',
      't/010_logical_decoding_timelines.pl',
      't/012_subtransactions.pl',
      't/013_crash_restart.pl',
      't/014_unlogged_reinit.pl',
      't/015_promotion_pages.pl',
      't/016_min_consistency.pl',
      't/017_shm.pl',
      't/018_wal_optimize.pl',
      't/019_replslot_limit.pl',
      't/020_archive_status.pl',
      't/021_row_visibility.pl',
      't/022_crash_temp_files.pl',
      't/023_pitr_prepared_xact.pl',
      't/024_archive_recovery.pl',
      't/025_stuck_on_old_timeline.pl',
      't/026_overwrite_contrecord.pl',
      't/027_stream_regress.pl',
      't/028_pitr_timelines.pl',
      't/029_stats_restart.pl',
      't/030_stats_cleanup_replica.pl',
      't/031_recovery_conflict.pl',
      't/032_relfilenode_reuse.pl',
      't/033_replay_tsp_drops.pl',
      't/034_create_database.pl',
      't/035_standby_logical_decoding.pl',
      't/036_truncated_dropped.pl',
      't/037_invalid_database.pl',
      't/038_save_logical_slots_shutdown.pl',
      't/039_end_of_wal.pl',
      't/040_standby_failover_slots_sync.pl',
      't/041_checkpoint_at_promote.pl',
      't/042_low_level_backup.pl',
      't/043_no_contrecord_switch.pl',
      't/044_invalidate_inactive_slots.pl',
    ],
  },
}
